<h1 align="center">Математика в компьютерных играх</h1>

##### <h3>Содержание</h3>  
- [Введение](#h1)
- [Глава 1 – Начало](#h2) 
- [Глава 2 – Треугольник между игроками](#h3)
- [Глава 3– Расстояние между игроками](#h4)
- [Глава 4 – Угол при повороте](#h5)
- [Глава 5 – Движение по прямой](#h6)
  - [Глава 5.1 - Нахождение градиента](#h7) 
  - [Глава 5.2 - Движение игрока](#h8)
- [Глава 6 - Пример из настоящей видеоигры](#h9)
- [Глава 7 – Прыжок по параболе](#h10)
  - [Глава 7.1 - Вычисление параболы](#h11)
  - [Глава 7.2 - Пример использования параболы](#h12)
- [Заключение](#h13)

<a name="h1"/>

# Введение

Прежде всего, что такое компьютерные игры? Для многих это просто красочные фигуры, которые двигаются по экрану. Однако, на самом деле это код, который состоит из бесконечных строк и способен управлять единицами и нолями. Для того, чтобы сама видеоигра правильно функционировала, в ней используются самые распространенные математические вычисления. Чтобы показать насколько математически основан наш мир компьютерных игр я создала симуляцию для вычисления ряда самых часто использованных функций в видеоиграх.
Цель проекта: показать где и каким образом используется математика в видеоиграх на примере написанной мною демонстрационной игры.
Задачипроекта:
- Рассчитать расстояние между игроками;
-	Найти угол, при котором игрок должен повернуться при движении;
-	Вычислить градиент, с которым должен двигаться игрок;
-	Рассчитать параболу, по которой игрок будет прыгать;

<a name="h2"/>

# Глава 1 – Начало

<img align="right" width="200px" src="https://user-images.githubusercontent.com/73754515/181485679-f7caccee-28e8-4750-9153-c2cb8ec50c47.png">

На первом этапе кодаимпортируется библиотеки как «math», «pygame» и «random»,которые будут необходимы для того, чтобы работала программа,а также спрашивает несколько вопросов для запуска симуляции и благодаря функции «while» симуляция может повторяться бесконечно, пока ее не отключить (см.Рисунок 2).
Далее запрашиваются входные данные, чтобы запуститьресурсы «pygame». Для чистоты эксперимента я вызвала функцию «random», которая будет случайно выбирать координаты в промежутке от 0 – 620 для (x, y) – Синего квадрата и для (x2, y2) – Красного квадрата (см.Рисунок 3).Затем изображение игроков будет выведено на отдельном экране 700px на 700px, используя эти случайно выбранныекоординаты (см.Рисунок 1).

<p align = "center">
<img width="600px" src = "https://user-images.githubusercontent.com/73754515/181287080-93021892-5a09-48d1-a180-2b8336c3806a.png">
</p>
<p align = "center">Рисунок2. Начало программы часть 1</p>

Подготовив экран, в следующих этапах будут показаны четыре самые распространенные математические вычисления, которые используются почти в каждой видеоигре.

<p align = "center">
<img width="600px" src = "https://user-images.githubusercontent.com/73754515/181486061-37f671da-f626-4a3d-8bac-e3519002159a.png">
</p>
<p align = "center">Рисунок3. Начало программы часть 2</p>

<a name="h3"/>

# Глава 2 – Треугольник между игроками

Между любыми двумя точками можно построить прямоугольный треугольник, где гипотенуза будет дистанцией между Красным и Синимквадратами. Для вычисления гипотенузы используется теорема Пифагора, но сначала нужно найти стороны треугольника (см.Рисунок4).Стороны треугольника высчитываются в зависимости от того, как расположенны игроки, так как возможны четыре разные ситуации (см.Рисунок 5).

<p align="center"><img width="800px" src = "https://user-images.githubusercontent.com/73754515/181291299-2e769257-5fc6-4e13-a863-35062b1d3e43.png"></p>

Как можно увидеть в коде, позиции Красного квадрата отнимаются от позицииСинего: (x2 – x) и (y2 – y). Однако, если Синий квадрат имеет более высокие значения, то нужно отнимать в противоположном порядке. Показанный ниже код вычисляет какое из значений X и Y больше и отнимает числа в правильном порядке для того, чтобы мы могли работать с правильными числами в следующих этапах программы(см.Рисунок 6). 

<p align = "center">
<img width="500px" src = "https://user-images.githubusercontent.com/73754515/181485206-f99676d4-7455-4ad7-a50c-7346684bf798.png">
</p>
<p align = "center">Рисунок6. Вычисление сторон X и Y</p>

<a name="h4"/>

# Глава 3– Расстояние между игроками

<img align="right" width="200px" src="https://user-images.githubusercontent.com/73754515/181481295-b3e6b3ce-7eaf-4e24-81f6-fe10f8b861d2.png">

В результате вычисления двух сторон треугольника мы можем использовать теорему Пифагора для вычисления гипотенузы - расстояния между Красным и Синим квадратами (см.Рисунок 7).Поскольку в библиотеке «math» нет функции «возвести в квадрат», я переписала уравнение в другой форме (Г – Гипотенуза) - 
<p align="center">(X × X) × (Y × Y) = Г × Г</p>
После вычисления Г × Г,используется функция«math.sqrt» для того, чтобы возвести Г × Г в квадратный корень, получить гипотенузу и сохранить в переменной «hyp»(см.Рисунок 8).
Как пример, это вычисление будет использовано, чтобы показать дистанцию между героями или объектом в игре.
<br><br>
<p align = "center">
<img width="600px" src = "https://user-images.githubusercontent.com/73754515/181486639-bbbaf7ab-f56c-42e3-b460-42c3a381cc42.png">
</p>
<p align = "center">Рисунок8. Вычисление гипотенузы</p>

<a name="h5"/>

# Глава 4 – Угол при повороте

<img width="175px" align="right" src="https://user-images.githubusercontent.com/73754515/181482015-0acf5acc-7ff6-4216-8de3-a6bf030c18c7.png">

В четвертом этапе вычисляется угол Красного квадрата по отношению к Синему (см.Рисунок 9) иего пеленг (угол,отсчитываемый с севера, по часовой стрелке)(см.Рисунок 11).В играх это необходимо, чтобы игроки могли поворачиваться лицом к лицу к своим врагам. 
Прежде всего, есть восемь разных расположений игроков
(см.Рисунок 10). 

В каждом из них углы вычисляются по-разному. А там, где игрокирасположены на одном уровне, между ними нет угла. Это значит, что программа должна определить положение квадратов и соответственно правильно посчитать угол.

<p align = "center">
<img width="500px" src = "https://user-images.githubusercontent.com/73754515/181488845-57729e35-67b6-4910-8e8c-91cd3d87099c.png">
</p>
<p align = "center">Рисунок10. Возможные расположение игроков</p>

В программе я использовала вложенный условный алгоритм для того чтобы написать ход действий к каждому расположению. Как вы можете увидеть, программа проверяет расположениеквадратов. Затем высчитывает угол прямоугольного треугольника, используя тригонометрию – тангенс (противоположная сторона, разделённая на касательную). Зная угол, можно высчитать пеленг, на который Красный квадрат должен повернуться, чтобы смотреть на свою цель (см.Рисунок 12).
<img width="180px" align="right" src="https://user-images.githubusercontent.com/73754515/181482401-d8e6bf6e-7fc1-4eee-ae17-968ece5b9be7.png">
Однако, если квадраты расположены на одной линии, числа X или Yбудут совпадать. В зависимости от их расположений пеленг будет равен 0, 90, 180 или 270 градусов.

Например, в этой позиции (см.Рисунок 11), необходимок углу,высчитанному используя тангенс, добавить 180 градусов.Так как это только демонстрация, то угол поворота высчитывается от севера. В настоящих играх не всегда игроки расположены относительно севера, поэтому в зависимости от их положения будут добавлены иные градусы. 
<br><br>
<p align = "center">
<img width="500px" src = "https://user-images.githubusercontent.com/73754515/181482583-f156bab4-c8da-4bb5-80af-9ca7a537bb34.png">
</p>
<p align = "center">Рисунок12. Вычисления угла и пеленга</p>

<a name="h6"/>

# Глава 5 – Движение по прямой

<img width="170px" align="right" src="https://user-images.githubusercontent.com/73754515/181482828-7db1e5eb-9360-49a1-bca8-e15bb2b3809e.png">

<a name="h7"/>

### Глава 5.1 - Нахождение градиента

Пятый этап можно разделить на две части. В первом мы находим сам градиент: на сколько нужно переместиться в сторону Y при каждом X (см.Рисунок 13). Благодаря способности компьютеров быстро выполнять вычисления, постояннопечатаются новые картинки и получается эффект движения игрока. Градиент находиться при делении стороны Y на X (см.Рисунок 14).
<br><br>
<p align = "center">
<img width="500px" src = "https://user-images.githubusercontent.com/73754515/181490265-c98ebe68-f088-444b-a13d-2df05dfacd0e.png">
</p>
<p align = "center">Рисунок14. Вычисления градиента</p>

<a name="h8"/>

### Глава 5.2 - Движение игрока

В зависимости от расположения игроков и зная их градиент движения,будет либо прибавляться,либо вычитаться единица от числа «х». А к числу «y» по ситуации будет, либо прибавляться,либо вычитаться градиент, пока числа «x2» и «y2» не станут равны «x» и «y». Однако, если у кубиков одинаковые числа «x» или «y», то программа это выявит и просто будет добавлять единицу к нужному значению (см.Рисунок 15).

Каждый раз, когда меняется какое-то значение, то программа опять напечатает фон, чтобы не было видно предыдущее расположение игроков, затем напечатается новый игрок в его новом положении. 
Как я уже сказала выше, благодаря быстрому перемещению картинок, человеческий глаз не замечает, что игрок не двигается, а печатается заново. 

<p align = "center">
<img width="500px" src = "https://user-images.githubusercontent.com/73754515/181483172-65c13b62-7ffb-41e4-9aef-7418ee382e94.png">
</p>
<p align = "center">Рисунок15. Движение Красного квадрата</p>

<a name="h9"/>

# Глава 6 - Пример из настоящей видеоигры

В видеоигре«TrigonometryWars»можно увидеть аналогичные математические вычисления. 
Когда враг (Розовый Куб) движется прямо к главному герою, чтобы атаковать его, мы можем нарисовать треугольник, по которому программа будет высчитывать градиент, с котором Розовый Куб должен перемещаться. (см.Рисунок 16)

<p align = "center">
<img width="500px" src = "https://user-images.githubusercontent.com/73754515/181483342-d581ece3-0ee3-4464-aae3-97b62b3f2f32.png">
</p>
<p align = "center">Рисунок16. Снимок игры «Trigonometry Wars»</p>


<a name="h10"/>

# Глава 7 – Прыжок по параболе

<a name="h11"/>

### Глава 7.1 - Вычисление параболы

<img width="170px" align="right" src="https://user-images.githubusercontent.com/73754515/181483488-bded15b4-ab38-4a91-9a58-34a4cd73fc09.png">

Помимо движения по прямой линии, во многих играх персонажи должны уметь прыгать. Для того чтобы создать данный эффект, подбирается парабола, по которой игрок должен прыгнуть(см.Рисунок 17). В моей демонстрационной игре я использовала параболу с формулой: 

<p align = "center">
<img width="270px" src = "https://user-images.githubusercontent.com/73754515/181483596-a13b1439-efeb-41dc-9766-18d2c6bd3d20.png">
</p>
<p align = "center">Рисунок17. Парабола</p>

Используя эту формулу параболы, программа будет самостоятельно высчитывать значения «x1» и «y2»игрока, который при изменении своих координат будетвновь печататься на экран. Так как экран начинает счет с нуля и нет значений меньше нуля, то к каждому высчитанному «x1» добавляется некое число, чтобы переместитьпараболу вправо. В коде это число записано в постоянном значении «constant2»(см.Рисунок 18). 

<p align = "center">
<img width="800px" src = "https://user-images.githubusercontent.com/73754515/181483857-dfc83556-3b34-4a11-a705-d1b71850f753.png">
</p>

<a name="h12"/>

### Глава 7.2 - Пример использования параболы

Чтобы более наглядно показать использование параболы в настоящей игре, я создала игрока с десятью разными положениями во время бега и плюс одно прыгающее изображение (см.Рисунок 19). В демонстрационной программе игрок бежит, делает прыжок, после чего он продолжает движение вперед в течении нескольких секунд до полной остановки(см.Рисунок 20).

<p align = "center">
<img width="800px" src = "https://user-images.githubusercontent.com/73754515/181484025-638f9f8a-7f92-4e55-9413-e87a50625a57.png">
</p>

Сделав функцию «running» (см.Рисунок 21), когда она вызывается, то по очереди, будут печататься игроки. Таким образом, в видеоиграх прописываются встроенные функции, которые вызываются при нажатии пробела или кнопками верх, вниз и т.д.

<p align = "center">
<img width="800px" src = "https://user-images.githubusercontent.com/73754515/181492607-acf518bb-c312-4d32-a9be-2fa58c9f768d.png">
</p>
<p align = "center">Рисунок21. Функция «running»</p>

<a name="h13"/>

# Заключение

При помощи демонстрационной игры я показала, что даже самые простейшие видеоигры основаны на математике. В этом проекте было разобрано как при помощи самых простых математических вычислений мы можем:
-	рассчитать расстояние между игроками
-	найти угол, при котором игрок должен поворачиваться при движении
-	высчитать градиент, с которым должен двигаться игрок
-	рассчитать параболу, по которой игрок будет прыгать
